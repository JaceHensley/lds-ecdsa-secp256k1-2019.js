(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return b}),n.d(t,"c",function(){return y});var r=n(14),i=n(121),a=n.n(i),o=n(35),c=n.n(o),u=n(40),s=n.n(u),f=n(26),d=n(466),p=n.n(d),l=function(t){var n=r.a({},t);delete n.d,delete n.kid,delete n.alg;var i=s.a.createHash("sha256").update(p()(n)).digest();return c.a.encode(e.from(i))},h=function(e){return r.b(void 0,void 0,void 0,function(){return r.d(this,function(t){return[2,a.a.from(r.a({},e,{crv:"K-256"}),"jwk").toString("blk","private")]})})},v=function(e){return r.b(void 0,void 0,void 0,function(){var t,n,i;return r.d(this,function(o){switch(o.label){case 0:return[4,Object(f.c)()];case 1:return t=o.sent(),n=a.a.from(r.a({},e,{crv:"K-256"}),"jwk").toString("blk","public"),i=t.compressPublicKey(Object(f.b)(n)),[2,Object(f.a)(i)]}})})},b=function(e){return r.b(void 0,void 0,void 0,function(){var t;return r.d(this,function(n){switch(n.label){case 0:return[4,h(e)];case 1:return t=n.sent(),[2,Object(f.b)(t)]}})})},y=function(e){return r.b(void 0,void 0,void 0,function(){var t;return r.d(this,function(n){switch(n.label){case 0:return[4,v(e)];case 1:return t=n.sent(),[2,Object(f.b)(t)]}})})};t.a={binToHex:f.a,getKid:l,hexToBin:f.b,privateJWKFromPrivateKeyHex:function(e){return r.b(void 0,void 0,void 0,function(){var t,n;return r.d(this,function(i){return t=r.a({},a.a.from(e,"blk").toJwk("private"),{crv:"secp256k1"}),n=l(t),[2,r.a({},t,{kid:n})]})})},privateJWKFromPrivateKeyPem:function(e){var t=r.a({},a.a.from(e,"pem").toJwk("private"),{crv:"secp256k1"}),n=l(t);return r.a({},t,{kid:n})},privateKeyHexFromJWK:h,privateKeyUInt8ArrayFromJWK:b,publicJWKFromPublicKeyHex:function(e){return r.b(void 0,void 0,void 0,function(){var t,n,i,o;return r.d(this,function(c){switch(c.label){case 0:return[4,Object(f.c)()];case 1:return t=c.sent(),n=e,66===e.length&&(n=Object(f.a)(t.uncompressPublicKey(Object(f.b)(e)))),i=r.a({},a.a.from(n,"blk").toJwk("public"),{crv:"secp256k1"}),o=l(i),[2,r.a({},i,{kid:o})]}})})},publicJWKFromPublicKeyPem:function(e){var t=r.a({},a.a.from(e,"pem").toJwk("public"),{crv:"secp256k1"}),n=l(t);return r.a({},t,{kid:n})},publicKeyHexFromJWK:v,publicKeyUInt8ArrayFromJWK:y}}).call(this,n(0).Buffer)},129:function(e,t){},135:function(e,t){},155:function(e,t){},167:function(e,t){},168:function(e,t,n){"use strict";(function(e){var r=n(136),i=n(118),a=n(119),o=n(1),c=n.n(o),u=n(34),s=n(470),f=n(120),d=n(465),p=n.n(d);var l=function(){function t(e){Object(r.a)(this,t),this.controller=e.controller,this.type=e.type||"EcdsaSecp256k1VerificationKey2019",this.privateKeyJwk=e.privateKeyJwk,this.publicKeyJwk=e.publicKeyJwk,this.alg="ES256K",void 0===this.publicKeyJwk&&(this.publicKeyJwk=Object.assign({},this.privateKeyJwk),delete this.publicKeyJwk.d),this.id=e.id||this.controller+"#"+this.fingerprint()}return Object(i.a)(t,null,[{key:"fingerprintFromPublicKey",value:function(e){var t=e.publicKeyJwk,n=Object.assign({},t);return delete n.kid,f.a.getKid(n)}}]),Object(i.a)(t,[{key:"signer",value:function(){return(t=this).privateKeyJwk?{sign:function(n){var r=n.data;return u.a(this,void 0,void 0,c.a.mark(function n(){var i,a;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i={alg:"ES256K",b64:!1,crit:["b64"]},a=e.from(r.buffer,r.byteOffset,r.length),n.abrupt("return",s.a.signDetached(a,t.privateKeyJwk,i));case 3:case"end":return n.stop()}},n)}))}}:{sign:function(e){return e.data,u.a(this,void 0,void 0,c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("No private key to sign with.");case 1:case"end":return e.stop()}},e)}))}};var t}},{key:"verifier",value:function(){return(t=this).publicKeyJwk?{verify:function(n){var r=n.data,i=n.signature;return u.a(this,void 0,void 0,c.a.mark(function n(){var o,u,f,d,l,h,v,b;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:o="ES256K",u="EcdsaSecp256k1VerificationKey2019",f=i.split(".."),d=Object(a.a)(f,2),l=d[0],d[1],n.prev=3,h=JSON.parse(p.a.decode(l)),n.next=10;break;case 7:throw n.prev=7,n.t0=n.catch(3),new Error("Could not parse JWS header; "+n.t0);case 10:if(h&&"object"===typeof h){n.next=12;break}throw new Error("Invalid JWS header.");case 12:if(h.alg===o&&!1===h.b64&&Array.isArray(h.crit)&&1===h.crit.length&&"b64"===h.crit[0]||3!==Object.keys(h).length){n.next=14;break}throw new Error("Invalid JWS header parameters for ".concat(u,"."));case 14:return v=!1,b=e.from(r.buffer,r.byteOffset,r.length),n.prev=16,n.next=19,s.a.verifyDetached(i,b,t.privateKeyJwk);case 19:v=!0,n.next=25;break;case 22:n.prev=22,n.t1=n.catch(16),console.error("An error occurred when verifying signature: ",n.t1);case 25:return n.abrupt("return",v);case 26:case"end":return n.stop()}},n,null,[[3,7],[16,22]])}))}}:{verify:function(){return u.a(this,void 0,void 0,c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("No public key to verify with.");case 1:case"end":return e.stop()}},e)}))}};var t}},{key:"addEncodedPublicKey",value:function(e){return e.publicKeyJwk=this.publicKeyJwk,e}},{key:"fingerprint",value:function(){var e=Object.assign({},this.publicKeyJwk);return delete e.kid,f.a.getKid(e)}},{key:"publicNode",value:function(){var e=this.controller,t={id:this.id,type:this.type};return e&&(t.controller=e),this.addEncodedPublicKey(t),t}}]),t}();t.a=l}).call(this,n(0).Buffer)},222:function(e,t){},227:function(e,t){},253:function(e,t){},258:function(e,t){},259:function(e,t){},277:function(e,t){},282:function(e,t){},292:function(e,t){},297:function(e,t){},298:function(e,t){},335:function(e,t){},396:function(e,t){},410:function(e,t,n){"use strict";(function(e){var r=n(1),i=n.n(r),a=n(136),o=n(118),c=n(210),u=n(88),s=n(300),f=n(211),d=n(34),p=n(74),l=n.n(p),h=n(467),v=n.n(h),b=n(168),y=v.a.suites.LinkedDataSignature,m=function(t){function n(e){e.signer;var t,r=e.key,i=e.date,o=e.useNativeCanonize;if(Object(a.a)(this,n),(t=Object(c.a)(this,Object(u.a)(n).call(this,{type:"EcdsaSecp256k1Signature2019",LDKeyClass:b.a,date:i,useNativeCanonize:o}))).alg="ES256K",t.LDKeyClass=b.a,r){var s=r.publicNode();t.verificationMethod=s.id,t.key=r,"function"===typeof r.signer&&(t.signer=r.signer()),"function"===typeof r.verifier&&(t.verifier=r.verifier(r,t.alg,t.type))}return t}return Object(f.a)(n,t),Object(o.a)(n,[{key:"sign",value:function(e){var t=e.verifyData,n=e.proof;return d.a(this,void 0,void 0,i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.signer&&"function"===typeof this.signer.sign){e.next=2;break}throw new Error("A signer API has not been specified.");case 2:return e.next=4,this.signer.sign({data:t});case 4:return n.jws=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}))}},{key:"verifySignature",value:function(t){var n=t.verifyData,r=t.verificationMethod,a=t.proof;return d.a(this,void 0,void 0,i.a.mark(function t(){var o,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=this.verifier){t.next=6;break}return t.next=4,this.LDKeyClass.from(r);case 4:c=t.sent,o=c.verifier(c,this.alg,this.type);case 6:return t.abrupt("return",o.verify({data:e.from(n),signature:a.jws}));case 7:case"end":return t.stop()}},t,this)}))}},{key:"assertVerificationMethod",value:function(e){var t=e.verificationMethod;return d.a(this,void 0,void 0,i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.a.hasValue(t,"type","EcdsaSecp256k1VerificationKey2019")){e.next=2;break}throw new Error('Invalid key type. Key type must be "'.concat("EcdsaSecp256k1VerificationKey2019",'".'));case 2:case"end":return e.stop()}},e)}))}},{key:"getVerificationMethod",value:function(e){var t=this,r=e.proof,a=e.documentLoader,o=Object.create(null,{getVerificationMethod:{get:function(){return Object(s.a)(Object(u.a)(n.prototype),"getVerificationMethod",t)}}});return d.a(this,void 0,void 0,i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.key){e.next=2;break}return e.abrupt("return",this.key.publicNode());case 2:return e.next=4,o.getVerificationMethod.call(this,{proof:r,documentLoader:a});case 4:return t=e.sent,e.next=7,this.assertVerificationMethod({verificationMethod:t});case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)}))}},{key:"matchProof",value:function(e){var t=this,r=e.proof,a=e.document,o=e.purpose,c=e.documentLoader,f=e.expansionMap,p=Object.create(null,{matchProof:{get:function(){return Object(s.a)(Object(u.a)(n.prototype),"matchProof",t)}}});return d.a(this,void 0,void 0,i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.matchProof.call(this,{proof:r,document:a,purpose:o,documentLoader:c,expansionMap:f});case 2:if(e.sent){e.next=4;break}return e.abrupt("return",!1);case 4:if(this.key){e.next=6;break}return e.abrupt("return",!0);case 6:if((t=r.verificationMethod)||(t=r.creator),"object"!==typeof t){e.next=10;break}return e.abrupt("return",t.id===this.key.id);case 10:return e.abrupt("return",t===this.key.id);case 11:case"end":return e.stop()}},e,this)}))}}]),n}(y);t.a=m}).call(this,n(0).Buffer)},436:function(e,t){},462:function(e,t){},463:function(e,t,n){"use strict";(function(e){var r=n(1),i=n.n(r),a=n(34),o=n(74),c=n.n(o),u=n(469),s=!("undefined"!==typeof e&&e.versions&&e.versions.node)&&("undefined"!==typeof window||"undefined"!==typeof self)?c.a.documentLoaders.xhr():c.a.documentLoaders.node();t.a=function(e){return a.a(void 0,void 0,void 0,i.a.mark(function t(){var n,r,a,o,c,f,d;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.indexOf("did:")){t.next=32;break}return t.next=3,u.a.resolve(e);case 3:if(n=t.sent,!e.indexOf("#")){t.next=31;break}r=!0,a=!1,o=void 0,t.prev=8,c=n.publicKey[Symbol.iterator]();case 10:if(r=(f=c.next()).done){t.next=17;break}if((d=f.value).id!==e){t.next=14;break}return t.abrupt("return",{contextUrl:null,document:d,documentUrl:e});case 14:r=!0,t.next=10;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(8),a=!0,o=t.t0;case 23:t.prev=23,t.prev=24,r||null==c.return||c.return();case 26:if(t.prev=26,!a){t.next=29;break}throw o;case 29:return t.finish(26);case 30:return t.finish(23);case 31:return t.abrupt("return",{contextUrl:null,document:n,documentUrl:e});case 32:return t.abrupt("return",s(e));case 33:case"end":return t.stop()}},t,null,[[8,19,23,31],[24,,26,30]])}))}}).call(this,n(19))},469:function(e,t,n){"use strict";var r=n(1),i=n.n(r),a=n(34),o=n(468),c=n.n(o),u=["assertionMethod","authentication","capabilityDelegation","capabilityInvocation"],s=["publicKey","keyAgreement"],f=function(e){var t=Object.assign({},e);return s.forEach(function(e){t[e]&&t[e].forEach(function(e){"#"===e.id[0]&&(e.id=t.id+e.id),e.controller||(e.controller=t.id)})}),u.forEach(function(e){t[e]&&(t[e]=t[e].map(function(e){return"#"===e[0]?t.id+e:e}))}),t},d=function(e){return a.a(void 0,void 0,void 0,i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c()(e,{headers:{Accept:"application/ld+json"},method:"get"}).then(function(e){return e.json()}));case 1:case"end":return t.stop()}},t)}))},p=function(e){var t=e.id&&0===e.id.indexOf("did:")?e:Object.assign({},e.didDocument);return e.methodMetadata&&(e.methodMetadata.continuation.publicKey&&(t.publicKey=e.methodMetadata.continuation.publicKey),e.methodMetadata.continuation.assertionMethod&&(t.assertionMethod=e.methodMetadata.continuation.assertionMethod),e.methodMetadata.continuation.authentication&&(t.authentication=e.methodMetadata.continuation.authentication),e.methodMetadata.continuation.capabilityInvocation&&(t.capabilityInvocation=e.methodMetadata.continuation.capabilityInvocation),e.methodMetadata.continuation.capabilityDelegation&&(t.capabilityDelegation=e.methodMetadata.continuation.capabilityDelegation),e.methodMetadata.continuation.keyAgreement&&(t.keyAgreement=e.methodMetadata.continuation.keyAgreement)),t};t.a={resolve:function(e){return a.a(void 0,void 0,void 0,i.a.mark(function t(){var n,r,a,o,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,n=e.split(":").splice(0,2).join(":"),t.t0=n,t.next="did:elem"===t.t0?5:9;break;case 5:return t.next=7,d("https://element-did.com/api/v1/sidetree/"+e);case 7:return r=t.sent,t.abrupt("break",12);case 9:return t.next=11,d("https://uniresolver.io/1.0/identifiers/"+e);case 11:r=t.sent;case 12:return t.next=14,p(r);case 14:return a=t.sent,o=f(a),c=o,t.abrupt("return",c);case 20:throw t.prev=20,t.t1=t.catch(0),console.error("Could not resolve: "+e),new Error(t.t1);case 24:case"end":return t.stop()}},t,null,[[0,20]])}))}}},470:function(e,t,n){"use strict";(function(e){var r=n(14),i=n(35),a=n.n(i),o=n(26),c=n(40),u=n.n(c),s=n(120),f=function(e){function t(t){var n=e.call(this,t)||this;return n.name="JWSVerificationFailed",n}return r.c(t,e),t}(Error);t.a={decode:function(e,t){void 0===t&&(t={complete:!1});var n=e.split("."),r=n[0],i=n[1],o=n[2];return t.complete?{header:JSON.parse(a.a.decode(r)),payload:JSON.parse(a.a.decode(i)),signature:o}:JSON.parse(a.a.decode(i))},sign:function(t,n,i){return void 0===i&&(i={alg:"ES256K"}),r.b(void 0,void 0,void 0,function(){var c,f,d,p,l,h,v,b,y,m,g;return r.d(this,function(r){switch(r.label){case 0:return[4,Object(s.b)(n)];case 1:return c=r.sent(),[4,Object(o.c)()];case 2:return f=r.sent(),d=a.a.encode(JSON.stringify(i)),p=a.a.encode(JSON.stringify(t)),l=d+"."+p,h=e.from(l),v=u.a.createHash("sha256").update(h).digest().toString("hex"),b=Object(o.b)(v),y=f.signMessageHashCompact(c,b),m=Object(o.a)(y),g=a.a.encode(e.from(m,"hex")),[2,d+"."+p+"."+g]}})})},signDetached:function(t,n,i){return void 0===i&&(i={alg:"ES256K",b64:!1,crit:["b64"]}),r.b(void 0,void 0,void 0,function(){var c,f,d,p,l,h,v,b,y,m;return r.d(this,function(r){switch(r.label){case 0:return[4,Object(s.b)(n)];case 1:return c=r.sent(),[4,Object(o.c)()];case 2:return f=r.sent(),d=a.a.encode(JSON.stringify(i)),p=e.concat([e.from(d+".","utf8"),e.from(t.buffer,t.byteOffset,t.length)]),l=e.from(p),h=u.a.createHash("sha256").update(l).digest().toString("hex"),v=Object(o.b)(h),b=f.signMessageHashCompact(c,v),y=Object(o.a)(b),m=a.a.encode(e.from(y,"hex")),[2,d+".."+m]}})})},verify:function(t,n){return r.b(void 0,void 0,void 0,function(){var i,c,d,p,l,h,v,b,y,m,g;return r.d(this,function(r){switch(r.label){case 0:return[4,Object(o.c)()];case 1:return i=r.sent(),[4,Object(s.c)(n)];case 2:if(c=r.sent(),d=t.split("."),p=d[0],l=d[1],h=d[2],v=p+"."+l,b=e.from(v),y=u.a.createHash("sha256").update(b).digest().toString("hex"),m=Object(o.b)(y),g=Object(o.b)(a.a.toBuffer(h).toString("hex")),i.verifySignatureCompact(g,c,m))return[2,JSON.parse(a.a.decode(l))];throw new f("signature verification failed")}})})},verifyDetached:function(t,n,i){return r.b(void 0,void 0,void 0,function(){var c,d,p,l,h,v,b,y,m,g,k;return r.d(this,function(r){switch(r.label){case 0:if(-1===t.indexOf(".."))throw new f("not a valid rfc7797 jws.");if(c=t.split(".."),d=c[0],p=c[1],"ES256K"!==(l=JSON.parse(a.a.decode(d))).alg)throw new Error("JWS alg is not signed with ES256K.");if(!1!==l.b64||!l.crit||!l.crit.length||"b64"!==l.crit[0])throw new Error("JWS Header is not in rfc7797 format (not detached).");return[4,Object(s.c)(i)];case 1:return h=r.sent(),[4,Object(o.c)()];case 2:if(v=r.sent(),b=e.concat([e.from(d+".","utf8"),e.from(n.buffer,n.byteOffset,n.length)]),y=e.from(b),m=u.a.createHash("sha256").update(y).digest().toString("hex"),g=Object(o.b)(m),k=Object(o.b)(a.a.toBuffer(p).toString("hex")),v.verifySignatureCompact(k,h,g))return[2,!0];throw new Error("Cannot verify detached signature.")}})})}}}).call(this,n(0).Buffer)},471:function(e,t,n){e.exports=n(804)},476:function(e,t,n){},494:function(e,t){},504:function(e,t){},513:function(e,t){},514:function(e,t){},533:function(e,t){},542:function(e,t){},544:function(e,t){},576:function(e,t){},577:function(e,t){},664:function(e,t){},665:function(e,t){},671:function(e,t,n){"use strict";n.r(t);var r=n(168);n.d(t,"EcdsaSecp256k1KeyClass2019",function(){return r.a});var i=n(410);n.d(t,"EcdsaSecp256k1Signature2019",function(){return i.a});var a=n(463);n.d(t,"defaultDocumentLoader",function(){return a.a})},679:function(e,t){},697:function(e,t){},721:function(e,t){},724:function(e,t){},733:function(e,t){},734:function(e,t){},751:function(e,t){},797:function(e,t){},798:function(e,t){},804:function(e,t,n){"use strict";n.r(t);var r=n(98),i=n.n(r),a=n(464),o=n.n(a),c=(n(476),n(1)),u=n.n(c),s=n(28),f=n(136),d=n(118),p=n(210),l=n(88),h=n(211),v=n(478),b=v.purposes.AssertionProofPurpose,y=n(671),m=y.EcdsaSecp256k1KeyClass2019,g=y.EcdsaSecp256k1Signature2019,k=y.defaultDocumentLoader,w=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(p.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={"@context":[{schema:"http://schema.org/",name:"schema:name",homepage:"schema:url",image:"schema:image"}],name:"Manu Sporny",homepage:"https://manu.sporny.org/",image:"https://manu.sporny.org/images/manu.png"},this.setState({doc:t}),n=new m({id:"did:elem:EiChaglAoJaBq7bGWp6bA5PAQKaOTzVHVXIlJqyQbljfmg#qfknmVDhMi3Uc190IHBRfBRqMgbEEBRzWOj1E9EmzwM",controller:"did:elem:EiChaglAoJaBq7bGWp6bA5PAQKaOTzVHVXIlJqyQbljfmg",privateKeyJwk:{kty:"EC",crv:"secp256k1",d:"wNZx20zCHoOehqaBOFsdLELabfv8sX0612PnuAiyc-g",x:"NbASvplLIO_XTzP9R69a3MuqOO0DQw2LGnhJjirpd4w",y:"EiZOvo9JWPz1yGlNNW66IV8uA44EQP_Yv_E7OZl1NG0",kid:"qfknmVDhMi3Uc190IHBRfBRqMgbEEBRzWOj1E9EmzwM"}}),e.next=5,v.sign(t,{compactProof:!1,documentLoader:k,purpose:new b,suite:new g({key:n})});case 5:return r=e.sent,this.setState({signed:r}),e.next=9,v.verify(r,{suite:new g({key:n}),compactProof:!1,documentLoader:k,purpose:new b});case 9:(i=e.sent).verified||console.log(i),this.setState({verified:i});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("h5",null,"EcdsaSecp256k1Signature2019"),i.a.createElement("pre",null,JSON.stringify(this.state,null,2)))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[471,1,2]]]);
//# sourceMappingURL=main.1049b928.chunk.js.map