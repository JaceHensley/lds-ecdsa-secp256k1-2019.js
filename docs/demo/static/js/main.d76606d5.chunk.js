(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{160:function(e,t,n){"use strict";var r=n(6),i=n(161),c=n.n(i),a=function(e){var t=r.a({},e.didDocument);return e.methodMetadata&&(t.publicKey=e.methodMetadata.continuation.publicKey),t};t.a={resolve:function(e){return r.b(void 0,void 0,void 0,function(){var t;return r.c(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,(i="https://uniresolver.io/1.0/identifiers/"+e,r.b(void 0,void 0,void 0,function(){return r.c(this,function(e){return[2,c()(i,{headers:{Accept:"application/ld+json"},method:"get"}).then(function(e){return e.json()})]})}))];case 1:return t=n.sent(),[4,a(t)];case 2:return[2,n.sent()];case 3:throw n.sent(),new Error("Could not resolve: "+e);case 4:return[2]}var i})})}}},164:function(e,t,n){"use strict";(function(e){var r=n(3),i=n(12),c=n.n(i),a=n(5),o=n(28),u=n.n(o),s=n(41),d=function(e){function t(t){var n=e.call(this,t)||this;return n.name="JWSVerificationFailed",n}return r.c(t,e),t}(Error);t.a={decode:function(e,t){void 0===t&&(t={complete:!1});var n=e.split("."),r=n[0],i=n[1],a=n[2];return t.complete?{header:JSON.parse(c.a.decode(r)),payload:JSON.parse(c.a.decode(i)),signature:a}:JSON.parse(c.a.decode(i))},sign:function(t,n,i){return void 0===i&&(i={alg:"ES256K"}),r.b(void 0,void 0,void 0,function(){var o,d,f,l,v,h,b,p,m,w,g;return r.d(this,function(r){switch(r.label){case 0:return[4,Object(s.b)(n)];case 1:return o=r.sent(),[4,Object(a.c)()];case 2:return d=r.sent(),f=c.a.encode(JSON.stringify(i)),l=c.a.encode(JSON.stringify(t)),v=f+"."+l,h=e.from(v),b=u.a.createHash("sha256").update(h).digest().toString("hex"),p=Object(a.b)(b),m=d.signMessageHashCompact(o,p),w=Object(a.a)(m),g=c.a.encode(e.from(w,"hex")),[2,f+"."+l+"."+g]}})})},signDetached:function(t,n,i){return void 0===i&&(i={alg:"ES256K",b64:!1,crit:["b64"]}),r.b(void 0,void 0,void 0,function(){var o,d,f,l,v,h,b,p,m,w;return r.d(this,function(r){switch(r.label){case 0:return[4,Object(s.b)(n)];case 1:return o=r.sent(),[4,Object(a.c)()];case 2:return d=r.sent(),f=c.a.encode(JSON.stringify(i)),l=e.concat([e.from(f+".","utf8"),e.from(t.buffer,t.byteOffset,t.length)]),v=e.from(l),h=u.a.createHash("sha256").update(v).digest().toString("hex"),b=Object(a.b)(h),p=d.signMessageHashCompact(o,b),m=Object(a.a)(p),w=c.a.encode(e.from(m,"hex")),[2,f+".."+w]}})})},verify:function(t,n){return r.b(void 0,void 0,void 0,function(){var i,o,f,l,v,h,b,p,m,w,g;return r.d(this,function(r){switch(r.label){case 0:return[4,Object(a.c)()];case 1:return i=r.sent(),[4,Object(s.c)(n)];case 2:if(o=r.sent(),f=t.split("."),l=f[0],v=f[1],h=f[2],b=l+"."+v,p=e.from(b),m=u.a.createHash("sha256").update(p).digest().toString("hex"),w=Object(a.b)(m),g=Object(a.b)(c.a.toBuffer(h).toString("hex")),i.verifySignatureCompact(g,o,w))return[2,JSON.parse(c.a.decode(v))];throw new d("signature verification failed")}})})},verifyDetached:function(t,n,i){return r.b(void 0,void 0,void 0,function(){var o,f,l,v,h,b,p,m,w,g,y;return r.d(this,function(r){switch(r.label){case 0:if(-1===t.indexOf(".."))throw new d("not a valid rfc7797 jws.");if(o=t.split(".."),f=o[0],l=o[1],"ES256K"!==(v=JSON.parse(c.a.decode(f))).alg)throw new Error("JWS alg is not signed with ES256K.");if(!1!==v.b64||!v.crit||!v.crit.length||"b64"!==v.crit[0])throw new Error("JWS Header is not in rfc7797 format (not detached).");return[4,Object(s.c)(i)];case 1:return h=r.sent(),[4,Object(a.c)()];case 2:if(b=r.sent(),p=e.concat([e.from(f+".","utf8"),e.from(n.buffer,n.byteOffset,n.length)]),m=e.from(p),w=u.a.createHash("sha256").update(m).digest().toString("hex"),g=Object(a.b)(w),y=Object(a.b)(c.a.toBuffer(l).toString("hex")),b.verifySignatureCompact(y,h,g))return[2,!0];throw new Error("Cannot verify detached signature.")}})})}}}).call(this,n(4).Buffer)},165:function(e,t,n){e.exports=n(328)},170:function(e,t,n){},176:function(e,t){},178:function(e,t){},211:function(e,t){},212:function(e,t){},261:function(e,t){},279:function(e,t){},307:function(e,t){},311:function(e,t){},324:function(e,t){},325:function(e,t){},328:function(e,t,n){"use strict";n.r(t);var r=n(11),i=n.n(r),c=n(155),a=n.n(c),o=(n(170),n(0)),u=n.n(o),s=n(8),d=n(156),f=n(157),l=n(162),v=n(158),h=n(163),b=n(164),p=n(330),m=n(331),w={crv:"secp256k1",d:"rhYFsBPF9q3-uZThy7B3c4LDF_8wnozFUAEm5LLC4Zw",kid:"JUvpllMEYUZ2joO59UNui_XYDqxVqiFLLAJ8klWuPBw",kty:"EC",x:"dWCvM4fTdeM0KmloF57zxtBPXTOythHPMm1HCLrdd3A",y:"36uMVGM7hnw-N6GnjFcihWE3SkrhMLzzLCdPMXPEXlA"},g={crv:"secp256k1",kid:"JUvpllMEYUZ2joO59UNui_XYDqxVqiFLLAJ8klWuPBw",kty:"EC",x:"dWCvM4fTdeM0KmloF57zxtBPXTOythHPMm1HCLrdd3A",y:"36uMVGM7hnw-N6GnjFcihWE3SkrhMLzzLCdPMXPEXlA"},y={challenge:"abc",created:"2019-01-16T20:13:10Z",domain:"example.com",proofPurpose:"authentication",verificationMethod:"did:btcr:xxcl-lzpq-q83a-0d5#key-JUvpllMEYUZ2joO59UNui_XYDqxVqiFLLAJ8klWuPBw"},O={"@context":{action:"schema:action",schema:"http://schema.org/"},action:"AuthenticateMe"},j=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(i)))).state={JWS:""},n}return Object(h.a)(t,e),Object(f.a)(t,[{key:"componentWillMount",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n,r,i,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.sign({hello:"world"},w);case 2:return t=e.sent,e.next=5,b.a.verify(t,g);case 5:return n=e.sent,this.setState({jws:t,verified:n}),r={},e.next=10,p.a(O,y,w,r);case 10:return i=e.sent,e.next=13,m.a(i,r);case 13:c=e.sent,this.setState({ldSig:i,lsSigVerified:c});case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("h4",null,"ES256K"),i.a.createElement("h5",null,"Public Key"),i.a.createElement("pre",null,JSON.stringify(g,null,2)),i.a.createElement("h5",null,"JWS"),i.a.createElement("code",null,this.state.jws),i.a.createElement("h5",null,"Verified Payload"),i.a.createElement("code",null,JSON.stringify(this.state.verified,null,2)),i.a.createElement("hr",null),i.a.createElement("h5",null,"JSON-LD Signature"),i.a.createElement("pre",null,JSON.stringify(this.state.ldSig,null,2)),i.a.createElement("h5",null,"Verified JSON-LD Signature"),i.a.createElement("code",null,JSON.stringify(this.state.lsSigVerified,null,2)))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},330:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var r=n(6),i=n(62),c=n(164),a=n(61),o=function(t,n,o,u){return r.b(void 0,void 0,void 0,function(){var s,d,f,l,v,h,b;return r.c(this,function(p){switch(p.label){case 0:return s=r.a({},n,{type:"EcdsaSecp256k1Signature2019"}),d=u.documentLoader||a.a,[4,Object(i.a)(t,s,d)];case 1:return f=p.sent(),l=f.framed,v=f.verifyDataHexString,h=e.from(v,"hex"),[4,c.a.signDetached(h,o)];case 2:return b=p.sent(),[2,r.a({},l,{proof:r.a({},s,{jws:b})})]}})})}}).call(this,n(4).Buffer)},331:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(6),i=n(62),c=n(41),a=n(164),o=n(61),u=function(e,t){return r.b(void 0,void 0,void 0,function(){var n;return r.c(this,function(r){switch(r.label){case 0:return[4,new Promise(function(n,r){e(t,function(e,t){return e?r(e):n(t)})})];case 1:if((n=r.sent()).document.publicKeyJwk)return[2,n.document.publicKeyJwk];if(n.document.publicKeyHex)return[2,c.a.publicJWKFromPublicKeyHex(n.document.publicKeyHex)];throw new Error("Invalid verificationMethod key format")}})})},s=function(t,n){return r.b(void 0,void 0,void 0,function(){var c,s,d,f;return r.c(this,function(r){switch(r.label){case 0:return s=n.documentLoader||o.a,[4,u(s,t.proof.verificationMethod)];case 1:return c=r.sent(),[4,Object(i.a)(t,t.proof,s)];case 2:return d=r.sent().verifyDataHexString,f=e.from(d,"hex"),[2,a.a.verifyDetached(t.proof.jws,f,c)]}})})}}).call(this,n(4).Buffer)},41:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return p}),n.d(t,"c",function(){return m});var r=n(3),i=n(38),c=n.n(i),a=n(12),o=n.n(a),u=n(28),s=n.n(u),d=n(5),f=n(159),l=n.n(f),v=function(t){var n=r.a({},t);delete n.d,delete n.kid,delete n.alg;var i=s.a.createHash("sha256").update(l()(n)).digest();return o.a.encode(e.from(i))},h=function(e){return r.b(void 0,void 0,void 0,function(){return r.d(this,function(t){return[2,c.a.from(r.a({},e,{crv:"K-256"}),"jwk").toString("blk","private")]})})},b=function(e){return r.b(void 0,void 0,void 0,function(){var t,n,i;return r.d(this,function(a){switch(a.label){case 0:return[4,Object(d.c)()];case 1:return t=a.sent(),n=c.a.from(r.a({},e,{crv:"K-256"}),"jwk").toString("blk","public"),i=t.compressPublicKey(Object(d.b)(n)),[2,Object(d.a)(i)]}})})},p=function(e){return r.b(void 0,void 0,void 0,function(){var t;return r.d(this,function(n){switch(n.label){case 0:return[4,h(e)];case 1:return t=n.sent(),[2,Object(d.b)(t)]}})})},m=function(e){return r.b(void 0,void 0,void 0,function(){var t;return r.d(this,function(n){switch(n.label){case 0:return[4,b(e)];case 1:return t=n.sent(),[2,Object(d.b)(t)]}})})};t.a={recoverPublicKeyHex:function(e,t,n,i){return r.b(void 0,void 0,void 0,function(){var c,a,o,u;return r.d(this,function(r){switch(r.label){case 0:return[4,Object(d.c)()];case 1:return c=r.sent(),a=Object(d.b)(n+i),o=Object(d.b)(e),u=c.recoverPublicKeyCompressed(a,t,o),[2,Object(d.a)(u)]}})})},getCompressedPublicKeyHex:function(e){return r.b(void 0,void 0,void 0,function(){var t,n,i;return r.d(this,function(r){switch(r.label){case 0:return[4,Object(d.c)()];case 1:return t=r.sent(),n=Object(d.b)(e),i=t.compressPublicKey(n),[2,Object(d.a)(i)]}})})},binToHex:d.a,getKid:v,hexToBin:d.b,privateJWKFromPrivateKeyHex:function(e){return r.b(void 0,void 0,void 0,function(){var t,n;return r.d(this,function(i){return t=r.a({},c.a.from(e,"blk").toJwk("private"),{crv:"secp256k1"}),n=v(t),[2,r.a({},t,{kid:n})]})})},privateJWKFromPrivateKeyPem:function(e){var t=r.a({},c.a.from(e,"pem").toJwk("private"),{crv:"secp256k1"}),n=v(t);return r.a({},t,{kid:n})},privateKeyHexFromJWK:h,privateKeyUInt8ArrayFromJWK:p,publicJWKFromPublicKeyHex:function(e){return r.b(void 0,void 0,void 0,function(){var t,n,i,a;return r.d(this,function(o){switch(o.label){case 0:return[4,Object(d.c)()];case 1:return t=o.sent(),n=e,66===e.length&&(n=Object(d.a)(t.uncompressPublicKey(Object(d.b)(e)))),i=r.a({},c.a.from(n,"blk").toJwk("public"),{crv:"secp256k1"}),a=v(i),[2,r.a({},i,{kid:a})]}})})},publicJWKFromPublicKeyPem:function(e){var t=r.a({},c.a.from(e,"pem").toJwk("public"),{crv:"secp256k1"}),n=v(t);return r.a({},t,{kid:n})},publicKeyHexFromJWK:b,publicKeyUInt8ArrayFromJWK:m}}).call(this,n(4).Buffer)},61:function(e,t,n){"use strict";(function(e){var r=n(6),i=n(37),c=n.n(i),a=n(160),o=!("undefined"!==typeof e&&e.versions&&e.versions.node)&&("undefined"!==typeof window||"undefined"!==typeof self)?c.a.documentLoaders.xhr():c.a.documentLoaders.node();t.a=function(e,t){return r.b(void 0,void 0,void 0,function(){var n,i,c,u,s;return r.c(this,function(r){switch(r.label){case 0:if(0!==e.indexOf("did:"))return[3,5];n=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,a.a.resolve(e)];case 2:return n=r.sent(),[3,4];case 3:return i=r.sent(),t(i),[3,4];case 4:for(c=0,u=n.publicKey;c<u.length;c++)if((s=u[c]).id===e)return[2,t(null,{contextUrl:null,document:s,documentUrl:e})];r.label=5;case 5:return[2,o(e,t)]}})})}}).call(this,n(13))},62:function(e,t,n){"use strict";var r=n(6),i=n(28),c=n.n(i),a=n(37),o=n.n(a),u=function(e){return r.b(void 0,void 0,void 0,function(){return r.c(this,function(t){return[2,o.a.canonize(e)]})})},s=function(e){var t=c.a.createHash("sha256");return t.update(e),t.digest("hex")},d=function(e){var t=r.a({},e,{"@context":"https://w3id.org/security/v2"});return delete t.jws,delete t.signatureValue,delete t.proofValue,u(t)},f=function(e){var t=r.a({},e);return delete t.proof,u(t)};t.a=function(e,t,n){return r.b(void 0,void 0,void 0,function(){var i,c,a,u,l,v,h;return r.c(this,function(b){switch(b.label){case 0:if((i=r.a({},t)).creator&&(i.verificationMethod=t.creator),!i.verificationMethod)throw new Error("signatureOptions.verificationMethod is required");return i.created||(i.created=(new Date).toISOString()),[4,o.a.expand(e,{documentLoader:n})];case 1:return c=b.sent()[0],[4,o.a.compact(c,"https://w3id.org/security/v2",{skipExpansion:!0})];case 2:return a=b.sent(),[4,d(i)];case 3:return u=b.sent(),l=s(u),[4,f(a)];case 4:return v=b.sent(),h=s(v),[2,{framed:a,verifyDataHexString:l+h}]}})})}}},[[165,1,2]]]);
//# sourceMappingURL=main.d76606d5.chunk.js.map